# Cursor AI Global Rules

> A comprehensive guide for AI assistance in building modern, type-safe, and maintainable applications.

## Core Values & Interaction Model

### Priorities & Standards

```mermaid
Core Priorities
â”œâ”€â”€ User Value
â”‚   â”œâ”€â”€ Security (5/5)
â”‚   â”œâ”€â”€ Accessibility (4/5)
â”‚   â”œâ”€â”€ Reliability (4/5)
â”‚   â”œâ”€â”€ Performance (4/5)
â”‚   â””â”€â”€ DX (3/5)
â””â”€â”€ Execution Focus
    â”œâ”€â”€ Long-term > Short-term
    â”œâ”€â”€ Quality > Quantity
    â”œâ”€â”€ User needs > Technical excellence
    â””â”€â”€ Solutions > Problems
```

### AI Communication Protocol

- **Response Structure**
  - Start with random animal emoji (ğŸ¦Š, ğŸ¼, etc.)
  - Use markdown formatting consistently
  - Include precise file/line references (```startLine:endLine:filepath)
  - Break down complex tasks into manageable steps
  - Provide context upfront
  - Focus on solutions rather than problems

- **Code Analysis & Solutions**
  - Analyze existing code before suggesting changes
  - Respect existing patterns and conventions
  - Provide clear, actionable solutions
  - Explain reasoning and trade-offs
  - Include necessary imports and types
  - Ensure code is production-ready

## Technical Standards

### Core Technology Stack

```mermaid
Technology Stack
â”œâ”€â”€ Frontend
â”‚   â”œâ”€â”€ Core: React 19 + TypeScript
â”‚   â”œâ”€â”€ Routing: TanStack Router
â”‚   â”œâ”€â”€ State: Zustand + TanStack Query
â”‚   â””â”€â”€ UI: Shadcn/ui + Tailwind
â”œâ”€â”€ Backend
â”‚   â”œâ”€â”€ API: Hono.js/TanStack Start
â”‚   â”œâ”€â”€ Database: PostgreSQL + Redis
â”‚   â””â”€â”€ Auth: Better-Auth + OAuth
â””â”€â”€ Development
    â”œâ”€â”€ Testing: Vitest + Playwright
    â”œâ”€â”€ Quality: ESLint + Prettier
    â””â”€â”€ Build: Turborepo + PNPM
```

### Code Quality Standards

- **Structure**

  ```typescript
  // Function size: Max 50 lines
  // File size: Max 300 lines
  // Component structure example:
  export function UserProfile({ id }: { id: string }) {
    // 1. Hooks
    const user = useUser(id)

    // 2. Derived state
    const fullName = useMemo(() =>
      `${user.firstName} ${user.lastName}`,
      [user]
    )

    // 3. Handlers
    function handleUpdate() {
      // ...
    }

    // 4. Render
    return (/* JSX */)
  }
  ```

- **TypeScript Preferences**

  ```typescript
  // âœ… Correct
  type Status = 'idle' | 'loading' | 'success' | 'error'
  type Props = {
    id: string
    onUpdate: (id: string) => void
  }

  // âŒ Avoid
  interface Status {
    // ...
  }
  enum StatusEnum {
    // ...
  }
  ```

### Security & Performance

- **Security Checklist**
  - Input validation and sanitization
  - Proper access controls
  - Secure data handling
  - CORS and CSP policies
  - Rate limiting implementation

- **Performance Standards**
  - Lazy loading for routes/components
  - Efficient state management
  - Proper caching strategies
  - Bundle size optimization
  - Mobile-first approach

## AI Workflow Modes

### 1. Planning Mode

```mermaid
Planning Process
â”œâ”€â”€ Analysis
â”‚   â”œâ”€â”€ Requirements gathering
â”‚   â”œâ”€â”€ Clarifying questions (4-6)
â”‚   â””â”€â”€ Constraint identification
â”œâ”€â”€ Design
â”‚   â”œâ”€â”€ Architecture proposal
â”‚   â”œâ”€â”€ Technology selection
â”‚   â””â”€â”€ Implementation plan
â””â”€â”€ Execution
    â”œâ”€â”€ Phase-based implementation
    â”œâ”€â”€ Progress tracking
    â””â”€â”€ Quality validation
```

### 2. Development Mode

- **Code Generation**
  - Type-safe by default
  - Follow established patterns
  - Include tests
  - Document complex logic
  - Handle edge cases

- **Code Review**
  - Security review
  - Performance impact
  - Accessibility check
  - Best practices validation

### 3. Debugging Mode

1. **Problem Analysis**
   - Identify potential causes
   - Add strategic logging
   - Check error patterns
   - Analyze dependencies

2. **Solution Implementation**
   - Implement targeted fix
   - Verify solution
   - Clean up debug code
   - Document findings

## Quality Gates

```mermaid
Quality Validation
â”œâ”€â”€ Security (Must Pass)
â”‚   â”œâ”€â”€ Vulnerability checks
â”‚   â”œâ”€â”€ Input validation
â”‚   â”œâ”€â”€ Authentication
â”‚   â””â”€â”€ Authorization
â”œâ”€â”€ Accessibility (Must Pass)
â”‚   â”œâ”€â”€ WCAG compliance
â”‚   â”œâ”€â”€ Keyboard navigation
â”‚   â”œâ”€â”€ Screen reader support
â”‚   â””â”€â”€ Color contrast
â”œâ”€â”€ Performance (Should Pass)
â”‚   â”œâ”€â”€ Load time < 3s
â”‚   â”œâ”€â”€ FCP < 1.5s
â”‚   â”œâ”€â”€ TTI < 3.5s
â”‚   â””â”€â”€ Bundle size limits
â””â”€â”€ Code Quality (Should Pass)
    â”œâ”€â”€ Test coverage > 90%
    â”œâ”€â”€ No TypeScript errors
    â”œâ”€â”€ Linting passes
    â””â”€â”€ Documentation complete
```

## Success Metrics

### System Health

- Performance trends
- Error rates
- Security posture
- User satisfaction

### Development Efficiency

- Code quality metrics
- Development velocity
- Bug resolution time
- Documentation coverage

## Rule Management & Organization

### Directory Structure

```mermaid
Rule Structure
â”œâ”€â”€ .cursor/rules/
â”‚   â”œâ”€â”€ cursor-global-rules.mdc   # Global standards
â”‚   â”œâ”€â”€ CURSOR_MEMORY.mdc         # Project memories
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                     # Core rules
â”‚   â”‚   â”œâ”€â”€ formatting/
â”‚   â”‚   â”œâ”€â”€ security/
â”‚   â”‚   â””â”€â”€ testing/
â”‚   â”‚
â”‚   â”œâ”€â”€ languages/               # Language rules
â”‚   â”‚   â”œâ”€â”€ typescript/
â”‚   â”‚   â””â”€â”€ python/
â”‚   â”‚
â”‚   â””â”€â”€ project/                # Project rules
       â”œâ”€â”€ architecture/
       â””â”€â”€ workflows/
```

### Rule Standards

1. **File Format**

   ```yaml
   ---
   description: Brief description
   globs: ["**/*.{ts,tsx}"]
   ---
   ```

2. **Metadata Requirements**

   ```markdown
   <details>
   <summary>Rule Metadata</summary>

   - **Version**: 1.0.0
   - **Created**: [DATE]
   - **Updated**: [DATE]
   - **Dependencies**: [LIST]
   - **Tags**: [LIST]
   </details>
   ```

3. **Glob Pattern Guidelines**
   - Use brace expansion: `{src,app,lib}`
   - Depth-agnostic matches: `**/feature/**`
   - Multiple patterns in arrays
   - Document pattern choices

## Memory Management

### Memory Structure

```mermaid
Memory System
â”œâ”€â”€ Project Overview
â”‚   â”œâ”€â”€ Architecture decisions
â”‚   â”œâ”€â”€ Core technologies
â”‚   â””â”€â”€ Key constraints
â”œâ”€â”€ Code Patterns
â”‚   â”œâ”€â”€ Implementation patterns
â”‚   â”œâ”€â”€ Naming conventions
â”‚   â””â”€â”€ Common solutions
â”œâ”€â”€ Technical Debt
â”‚   â”œâ”€â”€ Known limitations
â”‚   â””â”€â”€ Planned improvements
â””â”€â”€ Development Workflow
    â”œâ”€â”€ Setup procedures
    â””â”€â”€ Testing patterns
```

### Memory Entry Format

```markdown
#### [Topic Name]
- **Context**: When/where this applies
- **Pattern/Solution**: Detailed description
- **Rationale**: Why this approach
- **Examples**: Implementation references
- **Added**: [YYYY-MM-DD]
```

### Memory Management Guidelines

1. **Creation Triggers**
   - Important project patterns
   - Project-specific conventions
   - Technical constraints
   - Recurring solutions
   - New best practices

2. **Maintenance Rules**
   - Regular validation
   - Clear categorization
   - Version tracking
   - Reference preservation

> ğŸ’¡ **Note**: These rules ensure consistent, high-quality code while maintaining efficient communication. Project-specific extensions can be defined in additional rule files.
